<!DOCTYPE html>
%html
  %head
    %meta{charset: "UTF-8"}
    %meta{name: "viewport", content: "width=device-width"}
    %title Bookstore
    %link{href: "https://fonts.googleapis.com/css?family=Open+Sans:300,400,600", rel: "stylesheet"}
    %link{href: "../css/style.css", rel: "stylesheet"}
  %body
    %main.container
      %a.general-back-link
        %i.fa-long-arrow-left.mr-15
        = link_to 'Back to results', @previous_path
        
      .row
        .col-sm-6
          .product-gallery
          -@book.pictures.each_with_index do |picture, index|
            -if index == 0
              .mb-20
                .img-responsive
                  = image_tag(picture.image_url)
            -else              
              %a.img-link{href: "#"}                    
                = image_tag(picture.image_url)
        .col-sm-6
          %h1.mt-res-0
            = @book.title
          %p.in-grey-600.small
            = @book.get_author_names
          .row
            .col-xs-12.col-md-4
              %p.h1.in-gold-500.mt-10
                = @book.price
            =render '/shared/change_amount', object: @book
          .pt-20.divider-lg
            %p Description
            %p.in-grey-600.small.line-height-2
              = truncate(@book.description, length:60)
              %a.in-gold-500.ml-10.read-more{href: "#"} Read More
              
          .pt-20.divider-lg
            .clearfix
              %p.general-item-info.pull-right
                = @book.publication
              %p.break-word Year of publication
          .pt-20.divider-lg
            .clearfix
              %p.general-item-info.pull-right
                =@book.get_book_dimensions
              %p.break-word Dimensions
          .pt-20.divider-lg
            .clearfix
              %p.general-item-info.pull-right
                =@book.materials
              %p.break-word Materials
      .mb-80
        %h3.in-gold-500.mb-25 
        =@book.reviews.count
        = render @book.reviews
        -if can? :create, Review
          .h3.in-gold-500
          = render '/reviews/review_form'
        -else
          .h3.in-gold-500
            /.............
            =link_to 'Sign in', new_user_session_path

:javascript
  $('.read-more').on('click', function(e) {
  e.preventDefault()
  $(this).parent().html("#{escape_javascript @book.description}")
  })

        
